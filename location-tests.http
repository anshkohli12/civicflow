# ‚ö° Thunder Client Test Collection
# üåç CivicFlow Location-Based Search Tests

### Login to get JWT token (Default User)
POST http://localhost:8080/api/auth/login
Content-Type: application/json

{
  "email": "john@example.com",
  "password": "password123"
}

### Login as Messi
POST http://localhost:8080/api/auth/login
Content-Type: application/json

{
  "email": "messi@example.com",
  "password": "messi123"
}

### ==== CHANDIGARH ISSUES ====

### 1. Add Issue in Chandigarh - Sector 17 (City Center)
POST http://localhost:8080/api/issues
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "title": "Broken Traffic Light at Sector 17 Plaza",
  "description": "Main traffic signal not working causing traffic jams during peak hours",
  "category": "infrastructure", 
  "latitude": 30.7333,
  "longitude": 76.7794,
  "critical": true
}

### 2. Add Issue in Chandigarh - Sector 22 (Residential)
POST http://localhost:8080/api/issues
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "title": "Open Sewage Drain in Sector 22",
  "description": "Uncovered sewage drain creating health hazards and bad smell",
  "category": "sanitation", 
  "latitude": 30.7267,
  "longitude": 76.7512,
  "critical": false
}

### 3. Add Issue in Chandigarh - Sector 35 (University Area)
POST http://localhost:8080/api/issues
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "title": "Potholes on University Road",
  "description": "Multiple deep potholes causing vehicle damage near Panjab University",
  "category": "infrastructure", 
  "latitude": 30.7590,
  "longitude": 76.7773,
  "critical": true
}

### 4. Add Issue in Chandigarh - Sector 43 (IT Park Area)
POST http://localhost:8080/api/issues
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "title": "Poor Street Lighting in IT Park",
  "description": "Inadequate lighting making area unsafe for evening commuters",
  "category": "safety", 
  "latitude": 30.7209,
  "longitude": 76.8086,
  "critical": false
}

### 5. Add Issue in Chandigarh - Sector 46 (Residential)
POST http://localhost:8080/api/issues
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "title": "Water Supply Shortage in Sector 46",
  "description": "Irregular water supply affecting daily household activities",
  "category": "utilities", 
  "latitude": 30.6923,
  "longitude": 76.7342,
  "critical": true
}

### 1. Add Sample Issue in Bangalore (Koramangala)
POST http://localhost:8080/api/issues
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "title": "Broken Streetlight on 80 Feet Road",
  "description": "Streetlight pole damaged causing safety issues during night",
  "category": "infrastructure", 
  "latitude": 12.9352,
  "longitude": 77.6245,
  "critical": true
}

### 2. Add Sample Issue in Bangalore (Whitefield)
POST http://localhost:8080/api/issues
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "title": "Traffic Signal Not Working",
  "description": "Main junction signal malfunctioning during peak hours",
  "category": "traffic",
  "latitude": 12.9698,
  "longitude": 77.7500,
  "critical": true
}

### 3. Add Sample Issue in Bangalore (HSR Layout)
POST http://localhost:8080/api/issues
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "title": "Garbage Overflow at Sector 1",
  "description": "Overflowing garbage bins attracting stray animals",
  "category": "sanitation",
  "latitude": 12.9082,
  "longitude": 77.6476,
  "critical": false
}

### 4. Add Sample Issue in Bangalore (Electronic City)
POST http://localhost:8080/api/issues
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "title": "Pothole on Hosur Road",
  "description": "Large pothole causing vehicle damage near toll plaza",
  "category": "infrastructure",
  "latitude": 12.8456,
  "longitude": 77.6603,
  "critical": true
}

### 5. Add Sample Issue in Delhi (Connaught Place)
POST http://localhost:8080/api/issues
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "title": "Water Logging at Central Delhi",
  "description": "Severe waterlogging during monsoon affecting commuters",
  "category": "environment",
  "latitude": 28.6315,
  "longitude": 77.2167,
  "critical": true
}

### 6. Add Sample Issue in Mumbai (Bandra)
POST http://localhost:8080/api/issues
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "title": "Broken Footpath near Station",
  "description": "Dangerous footpath conditions near Bandra station",
  "category": "infrastructure",
  "latitude": 19.0544,
  "longitude": 72.8406,
  "critical": false
}

---

## üß™ LOCATION SEARCH TESTS

### Test A: Nearby Issues in Bangalore (5km radius)
GET http://localhost:8080/api/issues/nearby?lat=12.9716&lng=77.5946&radius=5

### Test B: Nearby Issues in Bangalore (25km radius) 
GET http://localhost:8080/api/issues/nearby?lat=12.9716&lng=77.5946&radius=25

### Test C: Critical Issues Only in Bangalore
GET http://localhost:8080/api/issues/nearby/filtered?lat=12.9716&lng=77.5946&radius=30&critical=true

### Test D: Traffic Issues Only in Bangalore
GET http://localhost:8080/api/issues/nearby/filtered?lat=12.9716&lng=77.5946&radius=30&category=traffic

### Test E: Infrastructure Issues within 20km
GET http://localhost:8080/api/issues/nearby/filtered?lat=12.9716&lng=77.5946&radius=20&category=infrastructure

### Test F: All Issues in Delhi Region
GET http://localhost:8080/api/issues/nearby?lat=28.6139&lng=77.2090&radius=50

### Test G: Distance to specific issue from Bangalore
GET http://localhost:8080/api/issues/{{issue_id}}/distance?lat=12.9716&lng=77.5946

---

## üåç CHANDIGARH LOCATION TESTS

### Test H1: Find issues near Sector 17 (Chandigarh Center) - 5km radius
GET http://localhost:8080/api/issues/nearby?lat=30.7333&lng=76.7794&radius=5

### Test H2: Find issues near Sector 17 - 10km radius
GET http://localhost:8080/api/issues/nearby?lat=30.7333&lng=76.7794&radius=10

### Test H3: Find critical issues near Sector 17 - 15km radius
GET http://localhost:8080/api/issues/nearby/filtered?lat=30.7333&lng=76.7794&radius=15&critical=true

### Test H4: Find infrastructure issues near Sector 17 - 20km radius
GET http://localhost:8080/api/issues/nearby/filtered?lat=30.7333&lng=76.7794&radius=20&category=infrastructure

### Test H5: Find issues near Panjab University (Sector 35) - 8km radius
GET http://localhost:8080/api/issues/nearby?lat=30.7590&lng=76.7773&radius=8

### Test H6: Find sanitation issues in Chandigarh - 25km radius
GET http://localhost:8080/api/issues/nearby/filtered?lat=30.7333&lng=76.7794&radius=25&category=sanitation

### Test H7: Distance from Sector 17 to specific issue
GET http://localhost:8080/api/issues/{{issue_id}}/distance?lat=30.7333&lng=76.7794

---

## üìè EXPECTED DISTANCES FROM CHANDIGARH CENTER (Sector 17: 30.7333, 76.7794):

- Sector 22: ~3.2 km
- Sector 35 (University): ~3.8 km  
- Sector 43 (IT Park): ~5.1 km
- Sector 46: ~6.7 km
- Delhi: ~245 km
- Mumbai: ~1,165 km

---

## üìè EXPECTED DISTANCES FROM BANGALORE CENTER (12.9716, 77.5946):

- Koramangala: ~4.5 km
- Whitefield: ~18.5 km  
- HSR Layout: ~8.2 km
- Electronic City: ~15.8 km
- Delhi: ~2,100 km
- Mumbai: ~980 km
